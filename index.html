<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Lucky Bamboo - Anonymous Trace</title>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-font-smoothing: antialiased; }
        body { background-color: #fff; font-family: 'Poppins', sans-serif; color: #1a1a1a; overflow-x: hidden; }

        /* iOS Toast */
        .apple-toast {
            position: fixed; top: 15px; left: 15px; right: 15px; 
            background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); color: #fff; 
            border-radius: 20px; padding: 12px 20px;
            display: flex; align-items: center; gap: 12px; z-index: 9999;
            transform: translateY(-150%);
            transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .apple-toast.show { transform: translateY(0); }

        /* Lightbox */
        #lightbox {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95); 
            display: none; z-index: 10000; justify-content: center; align-items: center;
            backdrop-filter: blur(10px); cursor: zoom-out;
        }
        #lightbox img { max-width: 90%; max-height: 80%; border-radius: 4px; }

        /* Header */
        .header-wrap {
            position: fixed; top: 0; left: 0; width: 100%; height: 480px;
            background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(15px);
            z-index: 1000; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            transition: height 0.1s linear, box-shadow 0.3s ease;
        }
        .header-scrolled { box-shadow: 0 4px 20px rgba(0,0,0,0.03); border-bottom: 1px solid #f5f5f5; }

        .image-box {
            width: 260px; height: 260px; border-radius: 50%; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08); margin-bottom: 20px; cursor: pointer;
            transition: width 0.1s linear, height 0.1s linear, margin 0.1s linear;
        }
        .image-box img { width: 100%; height: 100%; object-fit: cover; }
        .title { font-family: 'Bodoni Moda', serif; font-size: 32px; text-transform: lowercase; transition: 0.1s linear; }
        
        /* ÊèèËø∞ÊñáÂ≠ó‰øùÊåÅ */
        .origin-desc { text-align: center; padding: 0 40px; margin-top: 15px; transition: opacity 0.2s ease; }

        /* Feed Area */
        .feed { padding: 480px 20px 80px; width: 100%; max-width: 500px; margin: 0 auto; }

        /* Áªü‰∏ÄÂä®Êïà */
        .slide-up-item { opacity: 0; transform: translateY(24px); animation: slideUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* Message Row */
        .message-row { display: flex; gap: 14px; margin-bottom: 30px; }
        .avatar-black { width: 32px; height: 32px; border-radius: 50%; background: #000; flex-shrink: 0; }

        .bubble { background: #f8f8f8; padding: 16px; border-radius: 0 18px 18px 18px; position: relative; flex: 1; border: 1px solid #f2f2f2; }
        .bubble::before { content: ''; position: absolute; left: -8px; top: 0; width: 0; height: 0; border-style: solid; border-width: 0 8px 10px 0; border-color: transparent #f8f8f8 transparent transparent; }

        .bubble-date { font-size: 9px; font-weight: 700; color: #ccc; margin-bottom: 6px; display: block; letter-spacing: 0.5px; }
        .bubble-text { font-size: 14px; color: #444; line-height: 1.6; margin-bottom: 12px; }

        .bubble-thumb { width: 80px; height: 80px; border-radius: 8px; overflow: hidden; margin-bottom: 12px; cursor: zoom-in; border: 1px solid #eee; }
        .bubble-thumb img { width: 100%; height: 100%; object-fit: cover; }

        /* Action & Reply UI */
        .action-bar { display: flex; gap: 18px; justify-content: flex-end; padding-top: 10px; border-top: 1px solid #eee; }
        .action-btn { background: none; border: none; cursor: pointer; display: flex; align-items: center; }
        .action-btn svg { width: 15px; height: 15px; stroke: #ccc; fill: none; stroke-width: 2.2; transition: 0.3s; }
        .action-btn.liked svg { stroke: #000; fill: #000; }

        /* Êñ∞ÁöÑ Reply UIÔºöÊûÅÁÆÄËæìÂÖ•Ë°å */
        .reply-box { margin-top: 15px; display: none; }
        .reply-input-line { display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #eee; padding-bottom: 4px; }
        .reply-input-line input { flex: 1; border: none; outline: none; background: none; font-size: 12px; color: #666; font-family: inherit; }
        .send-arrow { background: #000; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; }
        .send-arrow svg { width: 10px; height: 10px; stroke: #fff; fill: none; stroke-width: 3; }
        .send-arrow:active { transform: scale(0.9); }

        .reply-msg { font-size: 11px; color: #999; margin-top: 10px; padding: 6px 10px; background: #fff; border-radius: 6px; border: 1px solid #f0f0f0; }

        /* Milestone ÈªëÊ°Ü‰øùÊåÅ‰∏ÄËá¥Âä®Êïà */
        .milestone-row { 
            width: 100%; border-radius: 16px; padding: 20px; 
            background: #000; color: #fff; text-align: center; 
            margin: 35px 0; font-size: 13px; font-weight: 500;
            letter-spacing: 0.3px;
        }
    </style>
</head>
<body>

    <div id="app">
        <div id="toast" class="apple-toast">
            <div style="font-size: 18px;">üåø</div>
            <div style="flex:1">
                <b id="toastTitle" style="font-size: 12px; display: block;">Notification</b>
                <span id="toastMsg" style="font-size: 10px; opacity: 0.7;">New trace added</span>
            </div>
        </div>

        <div id="lightbox" onclick="this.style.display='none'">
            <img id="lightboxImg" src="">
        </div>

        <header class="header-wrap" id="header">
            <div class="image-box" onclick="triggerFlow()">
                <img src="image-10.png">
            </div>
            <h1 class="title" id="mainTitle">lucky bamboo</h1>
            <div class="origin-desc" id="descBox">
                <p style="font-size: 10px; font-weight: 700; color: #ddd; letter-spacing: 2px;">EST. DEC 2027</p>
                <p style="font-size: 14px; color: #777; font-style: italic; margin-top: 8px;">Tracing a life shared between friends.</p>
            </div>
        </header>

        <div class="feed" id="feed"></div>
    </div>

    <script>
        const feed = document.getElementById('feed');
        const toast = document.getElementById('toast');
        const lightbox = document.getElementById('lightbox');

        // Scroll Interpolation
        window.addEventListener('scroll', () => {
            const scrollY = window.scrollY;
            const progress = Math.min(scrollY / 200, 1);
            document.getElementById('header').style.height = (480 - (progress * 200)) + 'px';
            const imgSize = 260 - (progress * 120);
            const imgBox = document.querySelector('.image-box');
            imgBox.style.width = imgSize + 'px';
            imgBox.style.height = imgSize + 'px';
            imgBox.style.marginBottom = (20 - progress * 10) + 'px';
            document.getElementById('mainTitle').style.fontSize = (32 - (progress * 8)) + 'px';
            document.getElementById('descBox').style.opacity = 1 - (progress * 1.5);
            if (scrollY > 10) document.getElementById('header').classList.add('header-scrolled');
            else document.getElementById('header').classList.remove('header-scrolled');
        });

        const updates = [
            { type: 'milestone', text: "Someone picked up the lucky bamboo." },
            { type: 'image', date: 'JAN 04', text: "Just arrived at the new home. Everything looks perfect.", img: "image-10.png" },
            { type: 'journal', date: 'JAN 12', text: "Fresh water and morning sun. It's thriving." },
            { type: 'milestone', text: "Moving to a new caretaker." }
        ];
        let step = 0;

        function triggerFlow() {
            if(step >= updates.length) return;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
                createCard(updates[step]);
                step++;
                if(window.scrollY < 50) window.scrollTo({ top: 130, behavior: 'smooth' });
            }, 800);
        }

        function createCard(data) {
            const row = document.createElement('div');
            row.className = 'slide-up-item';
            
            if(data.type === 'milestone') {
                row.innerHTML = `<div class="milestone-row">${data.text}</div>`;
            } else {
                row.className += ' message-row';
                let imgHtml = data.img ? `<div class="bubble-thumb" onclick="openLightbox('${data.img}')"><img src="${data.img}"></div>` : '';
                
                row.innerHTML = `
                    <div class="avatar-black"></div>
                    <div class="bubble">
                        <span class="bubble-date">${data.date}</span>
                        ${imgHtml}
                        <p class="bubble-text">${data.text}</p>
                        <div class="action-bar">
                            <button class="action-btn" onclick="this.classList.toggle('liked')">
                                <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                            </button>
                            <button class="action-btn" onclick="toggleReply(this)">
                                <svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                            </button>
                        </div>
                        <div class="reply-box">
                            <div class="reply-input-line">
                                <input type="text" placeholder="Type a reply...">
                                <div class="send-arrow" onclick="sendReply(this)">
                                    <svg viewBox="0 0 24 24"><polyline points="9 18 15 12 9 6"></polyline></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            feed.appendChild(row);
        }

        function openLightbox(url) {
            document.getElementById('lightboxImg').src = url;
            lightbox.style.display = 'flex';
        }

        function toggleReply(btn) {
            const box = btn.closest('.bubble').querySelector('.reply-box');
            box.style.display = box.style.display === 'block' ? 'none' : 'block';
            if(box.style.display === 'block') box.querySelector('input').focus();
        }

        function sendReply(btn) {
            const input = btn.previousElementSibling;
            if(!input.value) return;
            const reply = document.createElement('div');
            reply.className = 'reply-msg';
            reply.innerText = input.value;
            btn.closest('.bubble').appendChild(reply);
            input.value = "";
            btn.closest('.reply-box').style.display = 'none';
        }
    </script>
</body>
</html>
