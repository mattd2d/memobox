 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MEMOCARD</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>

    <style>
        /* --- ÊûÅÁÆÄÂØπËØùËÆæËÆ° --- */
        #comment-list {
            text-align: left;
            max-height: 160px;
            overflow-y: auto;
            margin: 15px 0;
            font-family: 'Poppins', sans-serif;
            border-top: 1px solid rgba(0,0,0,0.05);
            padding-top: 10px;
        }

        .comment-item {
            font-size: 13px;
            line-height: 1.6;
            margin-bottom: 6px;
            color: #333;
            animation: fadeIn 0.3s ease;
        }

        .c-label-user { font-weight: 600; color: #888; margin-right: 4px; }
        .c-label-bot { font-weight: 600; color: #007AFF; margin-right: 4px; }
        
        /* --- ÂºπÁ™óÊ†∑Âºè --- */
        #confirm-layer { 
            position: fixed; inset: 0; z-index: 20000; 
            background: rgba(0,0,0,0.8); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); 
            display: none; align-items: center; justify-content: center; opacity: 0; transition: 0.3s; 
        }
        .confirm-card { 
            width: 85%; max-width: 320px; background: rgba(255,255,255,0.08); 
            padding: 30px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.1); text-align: center; 
        }
        .confirm-card h2 { font-size: 18px; font-weight: 600; margin-bottom: 12px; color: #fff; }
        .confirm-card p { font-size: 12px; color: rgba(255,255,255,0.5); line-height: 1.6; margin-bottom: 25px; }
        .confirm-btns { display: flex; gap: 12px; }
        .c-btn { flex: 1; padding: 15px; border-radius: 15px; border: none; font-weight: 700; font-family: inherit; font-size: 12px; cursor: pointer; transition: 0.2s; }
        .c-btn.cancel { background: rgba(255,255,255,0.1); color: white; }
        .c-btn.confirm { background: #ffffff; color: #000; }
        
 /* --- ÊåâÈíÆ UI ÈáçÊñ∞Â∏ÉÂ±Ä --- */
        #reset-trigger { 
            position: fixed; top: 10px; right: 10px; z-index: 5000; 
            background: none; color: rgba(255,255,255,0.03); border: none; 
            padding: 5px; font-size: 8px; cursor: pointer; transition: 0.3s; 
        }
        #reset-trigger:hover { color: rgba(255,255,255,0.2); }

        /* Â∫ïÈÉ®Â±Ö‰∏≠ÁöÑËøîÂõûÊåâÈíÆÔºöUI Â¢ûÂº∫ */
        #back-box-trigger { 
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 5000; 
            background: rgba(255,255,255,0.15); color: white; border: 1px solid rgba(255,255,255,0.3); 
            padding: 12px 30px; border-radius: 30px; font-size: 12px; font-weight: 600; 
            letter-spacing: 1px; cursor: pointer; backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px); transition: all 0.3s ease; font-family: 'Poppins', sans-serif; 
        }
        #back-box-trigger:hover { 
            background: rgba(255,255,255,0.9); color: #000; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.4); transform: translateX(-50%) translateY(-3px); 
        }

        /* --- Ê†∏ÂøÉÊ†∑Âºè‰øùÁïô --- */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-font-smoothing: antialiased; }
        body { background: #1a1a1a; font-family: 'Poppins', sans-serif; overflow: hidden; height: 100vh; width: 100vw; touch-action: none; }
        body.state-hero #stage, body.state-hero #lineCanvas { opacity: 0; pointer-events: none; }
        .center-hub { position: fixed; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 4000; pointer-events: none; }
        .main-avatar { 
            width: 76px; height: 76px; border-radius: 50%; background: rgba(255,255,255,0.1); 
            overflow: hidden; transition: all 1s cubic-bezier(0.19, 1, 0.22, 1); 
            cursor: pointer; pointer-events: auto; z-index: 4001; flex-shrink: 0; 
            transform: translateY(0); border: 2px solid #4CAF50; 
        }
        body.state-hero .main-avatar { width: 280px; height: 280px; box-shadow: 0 30px 80px rgba(0,0,0,0.6); transform: translateY(-60px); }
        .hero-text-block { position: absolute; top: 50%; left: 0; width: 100%; padding-top: 100px; text-align: center; color: white; transition: all 0.7s ease; pointer-events: none; opacity: 0; transform: translateY(20px); }
        body.state-hero .hero-text-block { opacity: 1; transform: translateY(0); }
        .hero-text-block h1 { font-size: 26px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; line-height: 1; margin-bottom: 10px; }
        .hero-text-block .time { font-size: 13px; opacity: 0.5; letter-spacing: 1px; margin-bottom: 25px; }
        .hero-text-block .description { font-size: 14px; font-weight: 300; line-height: 1.6; max-width: 400px; margin: 0 auto; opacity: 0.8; }
        #stage, #lineCanvas { transition: opacity 1.2s ease; }
        .bg-glass { position: fixed; inset: 0; z-index: -1; background: #222; background-position: center; background-size: cover; transform: scale(1.8); filter: blur(60px) brightness(0.4); }
        #lineCanvas { position: fixed; inset: 0; z-index: 50; pointer-events: none; }
        #top-notif { position: fixed; top: -80px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 350px; background: rgba(255,255,255,0.95); padding: 12px 20px; border-radius: 40px; z-index: 5000; display: flex; align-items: center; gap: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none; min-width: 260px; }
        #top-notif.active { transform: translateX(-50%) translateY(100px); }
        .main-avatar img { width: 100%; height: 100%; object-fit: cover; }
        #stage { position: absolute; inset: 0; z-index: 2500; pointer-events: none; }
        .bubble { position: absolute; border-radius: 50%; width: 120px; height: 120px; background: rgba(255, 255, 255, 0.12); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.2); cursor: grab; pointer-events: auto; opacity: 0; display: flex; align-items: center; justify-content: center; will-change: transform, opacity; z-index: 3000; top: 0; left: 0; }
        .bubble > * { pointer-events: none; }
        .bubble.spawned { opacity: 1; transition: opacity 1s ease-out; }
        .bubble.is-text { padding: 18px; font-size: 11px; color: #ffffff !important; text-align: center; line-height: 1.4; font-weight: 400; }
        .bubble.is-status { background: #ffffff !important; border: none; color: #000000 !important; font-weight: 700; text-transform: uppercase; font-size: 11px; }
        .unread-dot { position: absolute; top: 18px; right: 18px; width: 8px; height: 8px; background: #ff3b30; border-radius: 50%; }
        #modal-overlay { position: fixed; inset: 0; z-index: 6000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px); background: rgba(0,0,0,0.3); opacity: 0; transition: 0.4s; }
        #modal-overlay.active { display: flex; opacity: 1; }
        .modal-card { background: white; padding: 30px; border-radius: 30px; width: 85%; max-width: 320px; text-align: center; position: relative; }
        .modal-actions { display: flex; justify-content: center; gap: 40px; margin-top: 10px; border-top: 1px solid #eee; padding-top: 20px; }
        .btn-icon { background: none; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; outline: none; }
        .btn-icon svg { stroke: #999; fill: none; transition: 0.3s; }
        .btn-icon.liked svg { stroke: #ff3b30; fill: #ff3b30; }
        #comment-area { display: none; margin-top: 15px; animation: fadeIn 0.3s ease; }
        .input-group { display: flex; background: #f5f5f7; border-radius: 12px; padding: 8px 12px; align-items: center; }
        .input-group input { flex: 1; background: none; border: none; outline: none; font-size: 13px; font-family: inherit; }
        .input-group button { background: none; border: none; color: #007AFF; font-weight: 600; font-size: 13px; cursor: pointer; margin-left: 10px; }
    </style>
</head>
<body class="state-hero">
    <button id="back-box-trigger" onclick="location.href='index.html'">BACK TO BOX</button>
    <button id="reset-trigger" onclick="handleHardReset()">RESET SYSTEM</button>
    <div id="top-notif"><div style="width: 8px; height: 8px; background: #ff3b30; border-radius: 50%;"></div><span id="notif-text" style="font-size: 12px; color: #333;"></span></div>
    <div class="bg-glass"></div>
    <canvas id="lineCanvas"></canvas>

    <div id="modal-overlay" onclick="closeModal()">
        <div class="modal-card" onclick="event.stopPropagation()">
            <div id="m-visual"></div>
            <p id="m-text" style="color: #333; font-size: 14px; line-height: 1.5; margin-bottom: 10px;"></p>
            <div id="comment-list"></div>
            <div class="modal-actions">
                <button class="btn-icon" id="btn-like" onclick="toggleLike()"><svg width="22" height="22" viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></button>
                <button class="btn-icon" onclick="toggleCommentBox()"><svg width="22" height="22" viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg></button>
            </div>
            <div id="comment-area"><div class="input-group"><input type="text" id="comment-input" placeholder="Comment..."><button onclick="postComment()">Post</button></div></div>
        </div>
    </div>

    <div class="center-hub">
        <div class="main-avatar" onclick="document.body.classList.toggle('state-hero')"><img id="display-avatar" src=""></div>
        <div class="hero-text-block">
            <h1 id="display-name">LOADING...</h1>
            <p class="time" id="display-date"></p>
            <p class="description" id="display-desc"></p>
        </div>
    </div>
    <div id="stage"></div>

    <div id="confirm-layer">
        <div class="confirm-card">
            <h2 id="confirm-title">Title</h2>
            <p id="confirm-msg">Message goes here...</p>
            <div class="confirm-btns">
                <button class="c-btn cancel" onclick="hideConfirm()">Cancel</button>
                <button class="c-btn confirm" id="confirm-action-btn">Confirm</button>
            </div>
        </div>
    </div>

<script>
    let currentActiveBubble = null;
    const stage = document.getElementById('stage');
    const canvas = document.getElementById('lineCanvas');
    const ctx = canvas.getContext('2d');
    let bubbles = [];
    let draggedBubble = null;

    const firstMessage = { type: 'urgent', text: "Someone picked it up! Your plant has a new home." };
    const demoMessages = [
        { mode: 'img', text: "It‚Äôs all settled in on my desk and looking very vibrant.", img: "https://i.redd.it/just-joined-the-office-and-this-plant-was-on-my-desk-what-v0-g9wvhudwehsb1.jpg?width=3024&format=pjpg&auto=webp&s=85c5083e4e1f4a755cff80f210d004a7f0008389" },
        { mode: 'img', text: "A tiny new sprout just appeared; looks like it‚Äôs happy here.", img: "https://s3.amazonaws.com/media.buddinghomestead.com/wp-content/uploads/2018/03/27153950/IMG_1510-001-e1522184839956.jpg" },
        { mode: 'text', text: "It‚Äôs been sunny lately, so I moved it by the window for some rays." },
        { mode: 'text', text: "Wiped the dust off the leaves; it looks so much brighter now." },
        { mode: 'text', text: "It‚Äôs doing great and barely shedding. Such a low-maintenance little guy." },
        { mode: 'text', text: "Turned it around a bit so it doesn't lean too much toward the light." },
        { mode: 'text', text: "Seeing this splash of green while I work really boosts my mood." },
        { mode: 'text', text: "It‚Äôs raining outside, but having this bit of green makes it feel cozy in hereüòÑ." },
        { mode: 'img', text: "Caught some nice afternoon sun on the leaves, thought I‚Äôd share.", img: "https://i.redd.it/advice-for-my-lucky-that-cant-get-great-sunlight-v0-c54gnk7weppb1.jpg?width=3024&format=pjpg&auto=webp&s=a9acb16cfa2a234ca063476e10b1e4e8581d9912" },
        { mode: 'text', text: "Fresh water and a little trim today. Looking much cleaner now." },
        { mode: 'img', text: "long time no see. this is the updates!", img: "https://preview.redd.it/my-6-7-year-old-lucky-bamboo-v0-73dtwvzodcqe1.jpeg?width=640&crop=smart&auto=webp&s=f905e4f9b2085d49389f54f3435aad6a3ca6149d" },
        { mode: 'text', text: "Moved it to a warmer spot now that it's getting cold. Hope you‚Äôre doing well." }
    ];
    let messageIndex = 0;
    let virtualClock = new Date();

    // --- ÂÆåÂÖ®‰øùÁïô‰Ω†ÂéüÊú¨ÁöÑÁâ©ÁêÜ‰∏éÊ∞îÊ≥°ÂáΩÊï∞ ---
    function startDemoSequence() {
        sendSpecificMessage(firstMessage);
        function triggerNextMessage() {
            if (messageIndex < demoMessages.length) {
                const randomDays = Math.floor(Math.random() * 6) + 2; 
                virtualClock.setDate(virtualClock.getDate() + randomDays);
                virtualClock.setHours(Math.floor(Math.random() * 24), Math.floor(Math.random() * 60));
                const displayDelay = randomDays * 3000; 
                setTimeout(() => {
                    sendSpecificMessage(demoMessages[messageIndex++]);
                    triggerNextMessage();
                }, displayDelay);
            }
        }
        triggerNextMessage();
    }

    function sendSpecificMessage(msg) {
        document.body.classList.remove('state-hero');
        const timeStr = virtualClock.toLocaleString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false });
        const notif = document.getElementById('top-notif');
        document.getElementById('notif-text').innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <span>Status update.</span>
                <span style="font-size: 10px; opacity: 0.4; margin-left: 10px;">${timeStr}</span>
            </div>`;
        if (msg.mode === 'img') createCustomPhotoBubble(msg.img, msg.text, timeStr);
        else createBubbleElement({ type: 'text', content: msg.text, timestamp: timeStr }, msg.type === 'urgent');
        notif.classList.add('active');
        setTimeout(() => notif.classList.remove('active'), 4000);
    }

    function createBubbleElement(data, isStatus) {
        const el = document.createElement('div');
        el.className = `bubble is-${data.type} ${isStatus ? 'is-status' : ''}`;
        el.innerHTML = `<div class="unread-dot"></div>${data.content}`; 
        stage.appendChild(el);
        bubbles.push(setupBubbleObject(el, data, isStatus));
        requestAnimationFrame(() => el.classList.add('spawned'));
    }

    function createCustomPhotoBubble(imgSrc, caption, timeStr) {
        const el = document.createElement('div');
        el.className = `bubble is-img`;
        el.innerHTML = `<div class="unread-dot"></div><img src="${imgSrc}" style="width:100%; height:100%; object-fit:cover; border-radius:50%; pointer-events:none;">`;
        stage.appendChild(el);
        bubbles.push(setupBubbleObject(el, { type: 'img', content: caption, rawImg: imgSrc, timestamp: timeStr }, false));
        requestAnimationFrame(() => el.classList.add('spawned'));
    }

    function setupBubbleObject(el, data, isStatus) {
        const bObj = { el, x: window.innerWidth/2-60, y: window.innerHeight/2-60, vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10, isDragged: false, data, isStatus, comments: [], createdAt: data.timestamp || new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false }) };
        let startX, startY, startTime;
        const down = (x, y) => { startX = x; startY = y; startTime = Date.now(); draggedBubble = bObj; bObj.isDragged = true; el.style.transition = "transform 0.1s"; };
        const up = (x, y) => {
            if(!bObj.isDragged) return;
            if(Math.hypot(x - startX, y - startY) < 40 && (Date.now() - startTime) < 500) openModal(bObj);
            bObj.isDragged = false; draggedBubble = null; el.style.transition = "";
        };
        el.addEventListener('mousedown', e => down(e.clientX, e.clientY));
        window.addEventListener('mouseup', e => up(e.clientX, e.clientY));
        el.addEventListener('touchstart', e => down(e.touches[0].clientX, e.touches[0].clientY), {passive: true});
        window.addEventListener('touchend', e => { if(e.changedTouches[0]) up(e.changedTouches[0].clientX, e.changedTouches[0].clientY); });
        return bObj;
    }

    function animate(time) {
        const dpr = window.devicePixelRatio || 1;
        ctx.clearRect(0, 0, canvas.width/dpr, canvas.height/dpr);
        const ww = window.innerWidth, wh = window.innerHeight;
        let cx = ww / 2, cy = wh / 2;
        if (document.body.classList.contains('state-hero')) cy = wh / 2 - 60; 
        ctx.beginPath(); ctx.strokeStyle = 'rgba(255, 255, 255, 0.2)'; ctx.lineWidth = 1.5;
        bubbles.forEach((b, i) => {
            const currX = b.x+60, currY = b.y+60;
            let px = cx, py = cy; if(i > 0) { px = bubbles[i-1].x+60; py = bubbles[i-1].y+60; }
            ctx.moveTo(px, py); ctx.quadraticCurveTo((px+currX)/2, (py+currY)/2 + Math.sin(time*0.002+i)*10, currX, currY);
            if (!b.isDragged) {
                const dx = currX-cx, dy = currY-cy, dist = Math.sqrt(dx*dx+dy*dy)||1;
                b.vx += (-dy/dist)*0.0008 + (cx-currX)*0.00003;
                bubbles.forEach((b2, j) => {
                    if(i===j) return;
                    const pdx = (b2.x+60)-currX, pdy = (b2.y+60)-currY, pdist = Math.hypot(pdx, pdy)||1;
                    if(pdist<135) { const p=(135-pdist)*0.02; b.vx-=(pdx/pdist)*p; b.vy-=(pdy/pdist)*p; }
                });
                if(dist<100) { const p=(100-dist)*0.05; b.vx+=(dx/dist)*p; b.vy+=(dy/dist)*p; }
                b.vx*=0.92; b.vy*=0.92; b.x+=b.vx; b.y+=b.vy;
            }
            b.x = Math.max(0, Math.min(ww-120, b.x)); b.y = Math.max(0, Math.min(wh-120, b.y));
            b.el.style.transform = `translate3d(${b.x}px, ${b.y}px, 0)`;
        });
        ctx.stroke(); requestAnimationFrame(animate);
    }

    function openModal(b) {
        currentActiveBubble = b;
        const list = document.getElementById('comment-list');
        list.innerHTML = ""; b.comments.forEach(c => addCommentToUI(c.text, c.type, false));
        const dot = b.el.querySelector('.unread-dot'); if (dot) dot.remove();
        document.getElementById('m-visual').innerHTML = b.data.rawImg ? `<img src="${b.data.rawImg}" style="width:100%; border-radius:15px; margin-bottom:15px;">` : "";
        document.getElementById('m-text').innerHTML = `<div style="text-align: left; font-size: 11px; color: #bbb; margin-bottom: 8px;">${b.createdAt}</div><div style="text-align: left; color: #333; line-height: 1.5;">${b.data.content || ""}</div>`;
        document.getElementById('modal-overlay').style.display = 'flex';
        setTimeout(() => document.getElementById('modal-overlay').classList.add('active'), 10);
    }

    function closeModal() { document.getElementById('modal-overlay').classList.remove('active'); setTimeout(() => document.getElementById('modal-overlay').style.display = 'none', 400); }
    function postComment() { const input = document.getElementById('comment-input'); const val = input.value.trim(); if(val && currentActiveBubble){ addCommentToUI(val, 'user', true); input.value = ""; setTimeout(() => addCommentToUI("hahah, :)", 'bot', true), 5000); } }
    function addCommentToUI(text, type, shouldSave) { if(shouldSave && currentActiveBubble) currentActiveBubble.comments.push({ text, type }); const list = document.getElementById('comment-list'); const d = document.createElement('div'); d.className = 'comment-item'; d.innerHTML = `<span class="${type==='user'?'c-label-user':'c-label-bot'}">${type==='user'?'You:':'Holder:'}</span>${text}`; list.appendChild(d); list.scrollTop = list.scrollHeight; }
    function toggleLike() { document.getElementById('btn-like').classList.toggle('liked'); }
    function toggleCommentBox() { const a = document.getElementById('comment-area'); a.style.display = a.style.display === 'none' ? 'block' : 'none'; }
    
    function initPhysics() { resizeCanvas(); animate(0); }
    function resizeCanvas() { const dpr = window.devicePixelRatio || 1; canvas.width = window.innerWidth * dpr; canvas.height = window.innerHeight * dpr; ctx.scale(dpr, dpr); canvas.style.width = window.innerWidth + 'px'; canvas.style.height = window.innerHeight + 'px'; }

    // --- Êñ∞Â¢ûÔºöÊåÅ‰πÖÂåñÁä∂ÊÄÅÈÄªËæë‰∏éÈáçÁΩÆ ---
    function handleHardReset() {
        if(confirm("Reset everything?")) {
            localStorage.clear();
            location.reload();
        }
    }

    window.onload = () => {
        // ‰ªéÂ≠òÂÇ®‰∏≠Ëé∑ÂèñÊï∞ÊçÆÔºàÂ¶ÇÊûú‰Ω†‰πãÂâçÂ≠òËøáÔºâÊàñ‰ΩøÁî®ÈªòËÆ§ÊºîÁ§∫Êï∞ÊçÆ
        const savedData = JSON.parse(localStorage.getItem('memo_config'));
        
        if (savedData) {
            document.getElementById('display-avatar').src = savedData.img;
            document.getElementById('display-name').innerText = savedData.name;
            document.getElementById('display-desc').innerText = savedData.desc;
            document.querySelector('.bg-glass').style.backgroundImage = `url(${savedData.img})`;
        } else {
            // ÈªòËÆ§ÂÖúÂ∫ïÊï∞ÊçÆÔºàÈò≤Ê≠¢ÂΩïÂÖ•È°µÂà†ÊéâÂêéÊ≤°ÂÜÖÂÆπÔºâ
            const defaultImg = "https://preview.redd.it/my-6-7-year-old-lucky-bamboo-v0-73dtwvzodcqe1.jpeg?width=640&crop=smart&auto=webp&s=f905e4f9b2085d49389f54f3435aad6a3ca6149d";
            document.getElementById('display-avatar').src = defaultImg;
            document.getElementById('display-name').innerText = "LUCKY BAMBOO";
            document.getElementById('display-desc').innerText = "Watching it grow.";
            document.querySelector('.bg-glass').style.backgroundImage = `url(${defaultImg})`;
        }
        
        document.getElementById('display-date').innerText = new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' }).toUpperCase();
        
        initPhysics();
        setTimeout(startDemoSequence, 5000); 
    };

    window.onresize = resizeCanvas;
    window.addEventListener('mousemove', e => { if(draggedBubble){ draggedBubble.x=e.clientX-60; draggedBubble.y=e.clientY-60; } });
    window.addEventListener('touchmove', e => { if(draggedBubble){ const t=e.touches[0]; draggedBubble.x=t.clientX-60; draggedBubble.y=t.clientY-60; e.preventDefault(); } }, {passive: false});
</script>
</body>
</html>
